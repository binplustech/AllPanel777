<div class="casino-container-w">
    <div class="casino-center">
        <div class="casino-container">
            <div class="casino-table" [ngClass]="casinoService.classesByGameType[currentGameName]">
                <div class="casino-video">
                    <div class="casino-video-title">
                        <span class="casino-name">{{ gameResult()?.data?.res1?.cname }}</span>
                        <div class="casino-video-rid"> Round ID: {{ gameData()?.mid }} </div>
                    </div>
                    <div class="video-box-container">
                        <div class="video-box">
                            <iframe [src]="safeUrl"></iframe>
                        </div>
                    </div>
                    <div class="casino-timer d-none-small">
                        <div class="base-timer">
                            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" class="base-timer__svg">
                                <g class="base-timer__circle">
                                    <circle cx="50" cy="50" r="45" class="base-timer__path-elapsed"></circle>
                                    <path
                                            stroke-dasharray="-14 283" d="M 50, 50 m -45, 0 a 45,45 0 1,0 90,0 a 45,45 0 1,0 -90,0"
                                            class="base-timer__path-remaining"
                                            [ngClass]="{ 'red': gameData()?.lt <= 3, 'green': gameData()?.lt >= 7, 'orange': gameData()?.lt >= 4 && gameData()?.lt <= 6 }"
                                    ></path>
                                </g>
                            </svg>
                            <span
                                    class="base-timer__label"
                                    [ngClass]="{ 'red': gameData()?.lt <= 3, 'green': gameData()?.lt >= 7, 'orange': gameData()?.lt >= 4 && gameData()?.lt <= 6 }"
                            >
                                <span>{{ gameData()?.lt }}</span>
                            </span>
                        </div>
                    </div>
                    <div class="casino-video-right-icons">
                        <div title="Home" class="casino-video-home-icon">

                            <a href="/owncasino">
                                <i class="fas fa-home"></i>
                            </a>
                        </div>
                        <div title="Rules" class="casino-video-rules-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                    </div>
                </div>
                <!-- Custom Section (changes per table) -->
                @if (gameData()) {
                    @if ([CasinoTablesType['lucky7'], CasinoTablesType['lucky5'], CasinoTablesType['lucky7eu2'], CasinoTablesType['lucky7eu']].includes(currentGameName)) {
                        <app-lucky7 [gameData]="gameData()"></app-lucky7>
                    } @else if (CasinoTablesType['lucky15'] === currentGameName) {
                        <app-lucky15 [gameData]="gameData()"></app-lucky15>
                    } @else if (CasinoTablesType['ab3'] === currentGameName) {
                        <app-ab3 [gameData]="gameData()"></app-ab3>
                    } @else if (CasinoTablesType['ab4'] === currentGameName) {
                        <app-ab3 [gameData]="gameData()"></app-ab3>
                    } @else if (CasinoTablesType['andarbahar']  === currentGameName) {
                        <app-ab3 [gameData]="gameData()"></app-ab3>
                    } @else if (CasinoTablesType['andarbahar2']  === currentGameName) {
                        <app-andarbahar2 [gameData]="gameData()"></app-andarbahar2>
                    } @else if (CasinoTablesType["card32-A"] === currentGameName) {
                        <app-card32-a [gameData]="gameData()"></app-card32-a>
                    } @else if (CasinoTablesType["card32-B"] === currentGameName) {
                        <app-card32-b [gameData]="gameData()"></app-card32-b>
                    } @else if (CasinoTablesType['dragontigerliont20'] === currentGameName) {
                        <app-dragontigerliont20 [gameData]="gameData()"></app-dragontigerliont20>
                    } @else if (CasinoTablesType['dragontigeroneday'] === currentGameName) {
                        <app-dragontigeroneday [gameData]="gameData()"></app-dragontigeroneday>
                    } @else if (CasinoTablesType['dragontigert20'] === currentGameName) {
                        <app-dragontigert20 [gameData]="gameData()"></app-dragontigert20>
                    } @else if (CasinoTablesType['dragontigert202'] === currentGameName) {
                        <app-dragontigert20 [gameData]="gameData()"></app-dragontigert20>
                    } @else if (CasinoTablesType['poker6player'] === currentGameName) {
                        <app-poker6player [gameData]="gameData()"></app-poker6player>
                    } @else if (CasinoTablesType['pokeroneday'] === currentGameName) {
                        <app-pokeroneday [gameData]="gameData()"></app-pokeroneday>
                    } @else if (CasinoTablesType['pokert20'] === currentGameName) {
                        <app-pokert20 [gameData]="gameData()"></app-pokert20>
                    } @else if (CasinoTablesType['baccarat'] === currentGameName) {
                        <app-baccarat [gameData]="gameData()"></app-baccarat>
                    } @else if (CasinoTablesType['baccarat2'] === currentGameName) {
                        <app-baccarat2 [gameData]="gameData()"></app-baccarat2>
                    } @else if (CasinoTablesType['cardbaccarat29'] === currentGameName) {
                        <app-cardbaccarat29 [gameData]="gameData()"></app-cardbaccarat29>
                    } @else if (CasinoTablesType['one-roulette'] === currentGameName) {
                        <app-one-roulette [gameData]="gameData()"></app-one-roulette>
                    } @else if (CasinoTablesType['roulette11'] === currentGameName) {
                        <app-roulette11 [gameData]="gameData()"></app-roulette11>
                    } @else if (CasinoTablesType['roulette12'] === currentGameName) {
                        <app-roulette12 [gameData]="gameData()"></app-roulette12>
                    } @else if (CasinoTablesType['roulette13'] === currentGameName) {
                        <app-roulette13 [gameData]="gameData()"></app-roulette13>
                    } @else if (CasinoTablesType['instantteenpatti'] === currentGameName) {
                        <app-instantteenpatti [gameData]="gameData()"></app-instantteenpatti>
                    } @else if (CasinoTablesType['instantteenpatti2'] === currentGameName) {
                        <app-instantteenpatti2 [gameData]="gameData()"></app-instantteenpatti2>
                    } @else if (CasinoTablesType['instantteenpatti3'] === currentGameName) {
                        <app-instantteenpatti3 [gameData]="gameData()"></app-instantteenpatti3>
                    } @else if (CasinoTablesType['jokerteenpatti1'] === currentGameName) {
                        <app-jokerteenpatti1 [gameData]="gameData()"></app-jokerteenpatti1>
                    } @else if (CasinoTablesType['jokerteenpatti20'] === currentGameName) {
                        <app-jokerteenpatti20 [gameData]="gameData()"></app-jokerteenpatti20>
                    } @else if (CasinoTablesType['jokerteenpatti120'] === currentGameName) {
                        <app-jokerteenpatti120 [gameData]="gameData()"></app-jokerteenpatti120>
                    } @else if (CasinoTablesType['teenmuf'] === currentGameName) {
                        <app-teenmuf [gameData]="gameData()"></app-teenmuf>
                    } @else if (CasinoTablesType['teenpatti2'] === currentGameName) {
                        <app-teenpatti2 [gameData]="gameData()"></app-teenpatti2>
                    } @else if (CasinoTablesType['teenpatti2cards'] === currentGameName) {
                        <app-teenpatti2cards [gameData]="gameData()"></app-teenpatti2cards>
                    } @else if (CasinoTablesType['teenpatti20'] === currentGameName) {
                        <app-teenpatti20 [gameData]="gameData()"></app-teenpatti20>
                    } @else if (CasinoTablesType['teenpatti20b'] === currentGameName) {
                        <app-teenpatti20b [gameData]="gameData()"></app-teenpatti20b>
                    } @else if (CasinoTablesType['teenpatti20c'] === currentGameName) {
                        <app-teenpatti20c [gameData]="gameData()"></app-teenpatti20c>
                    } @else if (CasinoTablesType['teenpatti41'] === currentGameName) {
                        <app-teenpatti41 [gameData]="gameData()"></app-teenpatti41>
                    } @else if (CasinoTablesType['teenpatti42'] === currentGameName) {
                        <app-teenpatti42 [gameData]="gameData()"></app-teenpatti42>
                    } @else if (CasinoTablesType['teenpattioneday'] === currentGameName) {
                        <app-teenpattioneday [gameData]="gameData()"></app-teenpattioneday>
                    } @else if (CasinoTablesType['teenpattiopen'] === currentGameName) {
                        <app-teenpattiopen [gameData]="gameData()"></app-teenpattiopen>
                    } @else if (CasinoTablesType['teenpattitest'] === currentGameName) {
                        <app-teenpattitext [gameData]="gameData()"></app-teenpattitext>
                    } @else {
                        <div class="casino-detail">
                            <div class="casino-box low-high-box">
                                COMING SOON
                            </div>
                        </div>
                    }
                }
                <div class="casino-video-last-results d-none-big">
                    <ng-container *ngTemplateOutlet="finalResult"></ng-container>
                    <a href="#" class="result-more"> ... </a>
                </div>
            </div>
        </div>
        <app-footer></app-footer>
    </div>
    <div id="right-sidebar-id" class="right-sidebar casino-right-sidebar teen2sidebar">
        <span>
        </span>
        <div class="casino-place-bet">
            <div class="casino-place-bet-title">
                <span>Last Results</span>
            </div>
            @if (gameData()) {
                <div class="casino-video-last-results">
                    <ng-container *ngTemplateOutlet="finalResult"></ng-container>
                    <!-- <a href="#" class="result-more"> ... </a> -->
                </div>
            }
        </div>
        <span></span>
    </div>
</div>

<ng-template #finalResult>
    @if (casinoResKeys) {
        @for (item of gameResult()?.data?.res; track item.mid) {
            @if ([CasinoTablesType['lucky7'], CasinoTablesType['lucky5'], CasinoTablesType['lucky7eu2'] , CasinoTablesType['lucky7eu']].includes(currentGameName)) {
                <span [ngClass]="{ 'resultlow': casinoResKeys[item.win] === 'L', 'resulthigh': casinoResKeys[item.win] === 'H' }">
                    {{ casinoResKeys[item.win] }}
                </span>
            } @else if ([CasinoTablesType['ab3']].includes(currentGameName) ) {
                <span class="resultb">
                    {{ casinoResKeys[item.win] }}
                </span>
            } @else if ([CasinoTablesType['dragontigert20'], CasinoTablesType['dragontigeroneday'], CasinoTablesType['dragontigert202'], CasinoTablesType['dragontigerliont20']].includes(currentGameName) ) {
                @if (casinoResKeys[item.win] === 'T') {
                    <span class="resultb">
                        {{ casinoResKeys[item.win] }}
                    </span>
                }

                @if (casinoResKeys[item.win] === 'L') {
                    <span class="resultc">
                        {{ casinoResKeys[item.win] }}
                    </span>
                }

                @if (casinoResKeys[item.win] === 'D') {
                    <span class="resulta">
                        {{ casinoResKeys[item.win] }}
                    </span>
                }
            } @else if ([CasinoTablesType['pokert20']].includes(currentGameName)) {
                @if (casinoResKeys[item.win] === 'A') {
                    <span class="resulta">
                        {{ casinoResKeys[item.win] }}
                    </span>
                }

                @if (casinoResKeys[item.win] === 'B') {
                    <span class="resultb">
                        {{ casinoResKeys[item.win] }}
                    </span>
                }
            } @else if([CasinoTablesType['card32-A']].includes(currentGameName)) {
                <span class="resultb">
                        {{ casinoResKeys[item.win] }}
                    </span>
            } @else {
                <span [ngClass]="{ 'resultlow': casinoResKeys[item.win] === 'L', 'resulthigh': casinoResKeys[item.win] === 'H' }">
                    {{ casinoResKeys[item.win] }}
                </span>
            }
        }
    }
</ng-template>
